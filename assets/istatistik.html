<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>ğŸ“Š Ä°statistik Paneli</title>
</head>
<body>
  <h2>ğŸ“Š Ä°statistik Paneli</h2>
  <div id="stats">
    <p>YÃ¼kleniyor...</p>
  </div>

  <script>
    const token = localStorage.getItem("access_token");

    async function loadStats() {
      const res = await fetch("/stats", {
        headers: {
          "Authorization": "Bearer " + token
        }
      });
      const data = await res.json();

      const statsDiv = document.getElementById("stats");
      statsDiv.innerHTML = `
        <ul>
          <li>ğŸ§¾ Toplam Fatura SayÄ±sÄ±: <strong>${data.fatura_sayisi}</strong></li>
          <li>ğŸ’° Toplam Gelir (KDV hariÃ§): <strong>${data.toplam_gelir} TL</strong></li>
          <li>ğŸ“ˆ Toplam KDV: <strong>${data.toplam_kdv} TL</strong></li>
          <li>ğŸ‘¤ En Ã‡ok Fatura Kesilen MÃ¼ÅŸteri: <strong>${data.en_cok_fatura_kesilen_musteri || "Yok"}</strong></li>
          <li>ğŸ”¢ Bu MÃ¼ÅŸteriye Kesilen Fatura SayÄ±sÄ±: <strong>${data.fatura_sayisi_bu_musteri}</strong></li>
        </ul>
      `;
    }

    loadStats();
  </script>
</body>
</html>